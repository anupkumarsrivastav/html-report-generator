<div class="chart-container">
    <div class="chart-header">
      <h4 *ngIf="config.title">{{ config.title }}</h4>
      <div class="chart-controls">
        <button (click)="toggleView()" class="toggle-view-btn" [class.active]="showAsTable">
          {{ showAsTable ? 'ðŸ“Š Show Chart' : 'ðŸ“‹ Show Table' }}
        </button>
        <button *ngIf="config.downloadEnabled && !showAsTable" (click)="downloadChart()" class="download-btn">
          Download Chart
        </button>
      </div>
    </div>
    
    <div #chartDiv class="chart-plot" [style.height.px]="config.height || 400" [style.display]="showAsTable ? 'none' : 'block'"></div>
    
    <div *ngIf="showAsTable && getTableConfig()" class="chart-data-table">
      <lib-data-table [config]="getTableConfig()!"></lib-data-table>
    </div>
  </div>